<!DOCTYPE html><html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Label - R-Net</title><style>
body{
    margin:0;
    font-family: Arial;
    background:#f4f4f4;
}

header{
    background:#ff4da6;
    color:white;
    padding:15px;
    text-align:center;
    font-size:20px;
    font-weight:bold;
}

.container{
    padding:15px;
}

.card{
    background:white;
    padding:15px;
    margin-bottom:15px;
    border-radius:10px;
    box-shadow:0 2px 5px rgba(0,0,0,0.1);
}

input{
    width:100%;
    padding:8px;
    margin-top:5px;
    margin-bottom:10px;
    border-radius:6px;
    border:1px solid #ccc;
}

button{
    padding:8px 12px;
    margin:5px 3px;
    border:none;
    border-radius:6px;
    cursor:pointer;
}

.btn-main{
    background:#ff4da6;
    color:white;
}

.btn-cancel{
    background:#999;
    color:white;
}

.artist{
    border-top:1px solid #eee;
    padding-top:10px;
    margin-top:10px;
}

.artist img{
    width:100%;
    max-height:150px;
    object-fit:cover;
    border-radius:8px;
}
</style></head>
<body><header>Label Panel</header><div class="container"><div class="card">
    <h3 id="empresaInfo"></h3>
</div>

<!-- Adicionar Grupo -->
<div class="card">
    <h3>Novo Grupo</h3>
    <input type="text" id="grupoNome" placeholder="Nome do grupo">
    <input type="text" id="grupoIntegrantes" placeholder="Integrantes">
    <input type="text" id="grupoConceito" placeholder="Conceito">
    <input type="date" id="grupoDebut">
    <input type="text" id="grupoFandom" placeholder="Fandom">
    <input type="color" id="grupoCor">
    <input type="file" id="grupoFoto" accept="image/*">

    <button class="btn-main" onclick="salvarGrupo()">Salvar Grupo</button>
    <button class="btn-cancel" onclick="limparGrupo()">Cancelar</button>
</div>

<!-- Adicionar Solista -->
<div class="card">
    <h3>Novo Solista</h3>
    <input type="text" id="soloNome" placeholder="Nome do solista">
    <input type="text" id="soloConceito" placeholder="Conceito">
    <input type="date" id="soloDebut">
    <input type="text" id="soloFandom" placeholder="Fandom">
    <input type="color" id="soloCor">
    <input type="file" id="soloFoto" accept="image/*">

    <button class="btn-main" onclick="salvarSolo()">Salvar Solista</button>
    <button class="btn-cancel" onclick="limparSolo()">Cancelar</button>
</div>

<!-- Lista -->
<div class="card">
    <h3>Artistas da empresa</h3>
    <div id="listaArtistas"></div>
</div>

</div><script>

// ===== Empresa =====
let empresa = JSON.parse(localStorage.getItem("empresaAtual"));

if(empresa){
    document.getElementById("empresaInfo").innerText =
    empresa.nomeEmpresa + " | CEO: " + empresa.ceo;
}else{
    document.getElementById("empresaInfo").innerText =
    "Empresa não encontrada";
}

// ===== Banco =====
let artistas = JSON.parse(localStorage.getItem("artistas")) || [];
let mvs = JSON.parse(localStorage.getItem("mvs")) || [];

// ===== Upload imagem =====
function lerImagem(input, callback){
    if(input.files && input.files[0]){
        let reader = new FileReader();
        reader.onload = e => callback(e.target.result);
        reader.readAsDataURL(input.files[0]);
    }else{
        callback("");
    }
}

// ===== Grupo =====
function salvarGrupo(){
    lerImagem(document.getElementById("grupoFoto"), function(img){

        let grupo = {
            id: Date.now(),
            tipo: "grupo",
            empresa: empresa.nomeEmpresa,
            nome: document.getElementById("grupoNome").value,
            integrantes: document.getElementById("grupoIntegrantes").value,
            conceito: document.getElementById("grupoConceito").value,
            debut: document.getElementById("grupoDebut").value,
            fandom: document.getElementById("grupoFandom").value,
            cor: document.getElementById("grupoCor").value,
            foto: img
        };

        artistas.push(grupo);
        localStorage.setItem("artistas", JSON.stringify(artistas));
        limparGrupo();
        renderArtistas();
    });
}

function limparGrupo(){
    document.querySelectorAll("#grupoNome,#grupoIntegrantes,#grupoConceito,#grupoDebut,#grupoFandom").forEach(i=>i.value="");
    document.getElementById("grupoFoto").value="";
}

// ===== Solo =====
function salvarSolo(){
    lerImagem(document.getElementById("soloFoto"), function(img){

        let solo = {
            id: Date.now(),
            tipo: "solo",
            empresa: empresa.nomeEmpresa,
            nome: document.getElementById("soloNome").value,
            conceito: document.getElementById("soloConceito").value,
            debut: document.getElementById("soloDebut").value,
            fandom: document.getElementById("soloFandom").value,
            cor: document.getElementById("soloCor").value,
            foto: img
        };

        artistas.push(solo);
        localStorage.setItem("artistas", JSON.stringify(artistas));
        limparSolo();
        renderArtistas();
    });
}

function limparSolo(){
    document.querySelectorAll("#soloNome,#soloConceito,#soloDebut,#soloFandom").forEach(i=>i.value="");
    document.getElementById("soloFoto").value="";
}

// ===== Semana =====
function semanaAtual(){
    let now = new Date();
    let onejan = new Date(now.getFullYear(),0,1);
    return Math.ceil((((now - onejan)/86400000)+onejan.getDay()+1)/7);
}

// ===== Adicionar MV =====
function adicionarMV(artistaId){
    let link = prompt("Cole o link do YouTube");

    if(!link) return;

    let artista = artistas.find(a=>a.id==artistaId);
    let semana = new Date().getFullYear()+"-"+semanaAtual();

    let jaExiste = mvs.find(m =>
        m.artistaId == artistaId &&
        m.semana == semana
    );

    if(jaExiste){
        alert("Esse artista já lançou um MV essa semana!");
        return;
    }

    let mv = {
        id: Date.now(),
        artistaId: artistaId,
        grupo: artista.nome,
        empresa: artista.empresa,
        link: link,
        semana: semana,
        likes: 0,
        dislikes: 0,
        comentarios: []
    };

    mvs.push(mv);
    localStorage.setItem("mvs", JSON.stringify(mvs));

    alert("MV publicado! Já está no MV Zone!");
}

// ===== Render =====
function renderArtistas(){
    let div = document.getElementById("listaArtistas");
    div.innerHTML = "";

    artistas
    .filter(a => a.empresa == empresa.nomeEmpresa)
    .forEach(a=>{
        div.innerHTML += `
        <div class="artist">
            <h4>${a.nome} (${a.tipo})</h4>
            ${a.foto ? `<img src="${a.foto}">` : ""}
            <p>Conceito: ${a.conceito}</p>
            <p>Debut: ${a.debut}</p>
            <button class="btn-main" onclick="adicionarMV(${a.id})">
                Adicionar MV
            </button>
        </div>
        `;
    });
}

renderArtistas();

</script></body>
</html>
