<!DOCTYPE html><html>
<head>
<meta charset="UTF-8">
<title>R-NET News</title><script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script><script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script><style>
body{
  margin:0;
  font-family:Arial;
  background:#0f0f0f;
}

header{
  background:#111;
  padding:15px;
  text-align:center;
  color:white;
  font-size:22px;
}

#loginBox{
  text-align:center;
  margin:20px;
}

input, textarea{
  padding:8px;
  margin:5px;
  border-radius:6px;
  border:none;
}

button{
  background:#ff0055;
  color:white;
  border:none;
  padding:8px 14px;
  border-radius:6px;
  cursor:pointer;
}

#adminPanel{
  display:none;
  text-align:center;
  margin-bottom:20px;
}

#newsContainer{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
}

/* Post-it style */
.post{
  width:300px;
  min-height:200px;
  margin:15px;
  padding:15px;
  border-radius:10px;
  box-shadow:0 5px 15px rgba(0,0,0,0.5);
  transform:rotate(-1deg);
}

.yellow{background:#fff59d;}
.pink{background:#f8bbd0;}
.green{background:#c8e6c9;}
.orange{background:#ffe0b2;}

.post img{
  width:100%;
  margin-top:10px;
  border-radius:6px;
}
</style></head>
<body><header>R-NET NEWS</header><div id="loginBox">
  <input id="adminCode" placeholder="Código Admin">
  <button onclick="checkAdmin()">Entrar</button>
</div><div id="adminPanel">
  <h3>Painel Admin</h3>
  <input id="title" placeholder="Título"><br>
  <textarea id="content" placeholder="Notícia"></textarea><br>
  <input id="image" placeholder="URL da imagem (opcional)"><br>
  <button onclick="postNews()">Publicar</button>
</div><div id="newsContainer"></div><script>
const firebaseConfig = {
  apiKey: "AIzaSyCtPYRzfxQvgoHdigtnpN2Bew9iHRX4Xbo",
  authDomain: "rnet-news.firebaseapp.com",
  projectId: "rnet-news",
  storageBucket: "rnet-news.firebasestorage.app",
  messagingSenderId: "264932539638",
  appId: "1:264932539638:web:3b9875c04eac7869fac0d7"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const ADMIN_UID = "CgNIRHK6AOerilZ0Vcem8PWMe992";
let isAdmin = false;

/* =====================
ADMIN LOGIN POR CÓDIGO
===================== */

function checkAdmin(){
  const code = document.getElementById("adminCode").value;
  if(code === ADMIN_UID){
    isAdmin = true;
    document.getElementById("adminPanel").style.display="block";
    alert("Modo Admin ativado");
  }else{
    alert("Código incorreto");
  }
}

/* =====================
POSTAR NEWS
===================== */

function postNews(){
  const title = document.getElementById("title").value;
  const content = document.getElementById("content").value;
  const image = document.getElementById("image").value;

  if(!title || !content){
    alert("Preencha título e notícia");
    return;
  }

  db.collection("news").add({
    title:title,
    content:content,
    image:image,
    createdAt: firebase.firestore.FieldValue.serverTimestamp()
  });

  document.getElementById("title").value="";
  document.getElementById("content").value="";
  document.getElementById("image").value="";
}

/* =====================
LISTAR NEWS (AO VIVO)
===================== */

const colors = ["yellow","pink","green","orange"];

db.collection("news")
.orderBy("createdAt","desc")
.onSnapshot(snapshot=>{
  const container = document.getElementById("newsContainer");
  container.innerHTML="";

  snapshot.forEach(doc=>{
    const d = doc.data();
    const color = colors[Math.floor(Math.random()*colors.length)];

    container.innerHTML += `
      <div class="post ${color}">
        <h3>${d.title}</h3>
        <p>${d.content}</p>
        ${d.image ? `<img src="${d.image}">` : ""}
        ${isAdmin ? `<button onclick="deleteNews('${doc.id}')">Apagar</button>` : ""}
      </div>
    `;
  });
});

/* =====================
APAGAR (ADMIN)
===================== */

function deleteNews(id){
  db.collection("news").doc(id).delete();
}
</script></body>
</html>
